<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Telegram Game</title>
    <!-- Подключаем SDK Telegram -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* Используем переменные Telegram для автоматической темы */
        root {
            --bg-color: var(--tg-theme-bg-color, #ffffff);
            --text-color: var(--tg-theme-text-color, #222222);
            --hint-color: var(--tg-theme-hint-color, #999999);
            --button-color: var(--tg-theme-button-color, #2481cc);
            --button-text: var(--tg-theme-button-text-color, #ffffff);
            --secondary-bg: var(--tg-theme-secondary-bg-color, #f4f4f5);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            -webkit-user-select: none; /* Отключаем выделение текста */
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 24px;
            margin: 0 0 8px 0;
            font-weight: 600;
        }

        p.subtitle {
            color: var(--hint-color);
            font-size: 14px;
            margin: 0;
        }

        /* Сетка режимов */
        .modes-grid {
            width: 100%;
            max-width: 400px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .mode-card {
            background-color: var(--secondary-bg);
            padding: 16px;
            border-radius: 12px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .mode-card.active {
            border-color: var(--button-color);
            background-color: var(--bg-color);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .mode-title {
            font-weight: 600;
            font-size: 17px;
        }

        .mode-desc {
            font-size: 13px;
            color: var(--hint-color);
        }

        /* Кнопка старта (если не использовать нативную кнопку TG) */
        .start-btn {
            margin-top: 40px;
            width: 100%;
            max-width: 400px;
            padding: 16px;
            border-radius: 12px;
            border: none;
            background-color: var(--button-color);
            color: var(--button-text);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .start-btn:active {
            opacity: 0.8;
        }
    </style>
</head>
<body>

    <header>
        <h1>Название Игры</h1>
        <p class="subtitle">Выберите режим, чтобы начать</p>
    </header>

    <div class="modes-grid">
        <!-- Режим 1 -->
        <div class="mode-card" onclick="selectMode(this, 'classic')">
            <span class="mode-title">Классика</span>
            <span class="mode-desc">Обычные правила, спокойная игра без времени.</span>
        </div>

        <!-- Режим 2 -->
        <div class="mode-card" onclick="selectMode(this, 'blitz')">
            <span class="mode-title">Блиц</span>
            <span class="mode-desc">Быстрая игра, всего 60 секунд на раунд.</span>
        </div>

        <!-- Режим 3 -->
        <div class="mode-card" onclick="selectMode(this, 'hardcore')">
            <span class="mode-title">Хардкор</span>
            <span class="mode-desc">Одна ошибка — и игра окончена.</span>
        </div>
    </div>

    <button class="start-btn" id="main-action" onclick="startGame()">Играть</button>

    <script>
        // Инициализация Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.expand(); // Расширяем на все окно

        let selectedModeId = null;

        function selectMode(element, modeId) {
            // Убираем активный класс у всех
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('active');
            });
            // Добавляем текущему
            element.classList.add('active');
            selectedModeId = modeId;

            // Виброотклик (Haptic Feedback)
            tg.HapticFeedback.impactOccurred('light');

            // Можно также использовать нативную кнопку Telegram внизу
            tg.MainButton.text = "Начать: " + element.querySelector('.mode-title').innerText;
            tg.MainButton.show();
        }

        function startGame() {
            if (!selectedModeId) {
                tg.showAlert("Пожалуйста, выберите режим игры!");
                return;
            }
            
            // Логика запуска игры
            console.log("Запуск режима:", selectedModeId);
            tg.sendData(JSON.stringify({action: "start_game", mode: selectedModeId}));
            // tg.close(); // Закрыть приложение, если нужно
        }

        // Слушаем нажатие на нативную кнопку Telegram
        tg.onEvent('mainButtonClicked', function() {
            startGame();
        });
    </script>
</body>
</html>
